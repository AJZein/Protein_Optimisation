<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.1" />
<title>other_helpers API documentation</title>
<meta name="description" content="" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>other_helpers</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python"># Additional non specific useful functions
import subprocess
import shutil
import os
import numpy as np

def run_parallel(filename, args=&#39;&#39;, num_cores=1, out=False):
    &#34;&#34;&#34;Simple function to run a python script in serial or parallel and provide it with some parameters
    
    Parameters:
    ---
    **filename: *str* **  
    The name of the python file
    
    **args: *str* **  
    The parameters to pass to the python script, seperated by spaces
    
    **num_cores: *int* **  
    Number of cores/threads to use when running the script. 1 runs the script in parallel
    
    **out: *bool* **  
    If True, prints the output of the script
    
    &#34;&#34;&#34;
    
    
    if num_cores == 1:
        bashCommand = f&#34;python {filename} {args}&#34;
    else:
        bashCommand = f&#34;mpirun -np {num_cores} python {filename} {args}&#34;
    normal = subprocess.run(bashCommand.split(),
        stdout=subprocess.PIPE, stderr=subprocess.PIPE,
        check=True,
        text=True)

    if out:
        print(normal.stdout)
        
def read_atoms(filename):
    &#34;&#34;&#34;Gets the entire &#39;Atoms&#39; section from a lammps data file and puts it into a numpy array. 
    
    Parameters:
    ---
    **filename: *str* **  
    The name of the lammps data file
    
    Returns:
    ---
    **all_atoms: *str* **
    A numpy array containing the entire atoms section of the data file
    
    Notes:
    ---
    The &#39;Atoms&#39; section of a lammps data file is formatted as such: [atom_num, molecule-tag, atom-type, q, x, y, z, nx, ny, nz]. nx, ny, nz optional
    
    &#34;&#34;&#34;
    with open(filename, &#39;r&#39;) as file:
        data = file.readlines()
    
    for i in range(len(data)):
        line = data[i]
        if &#34;atoms&#34; in line:
            num_atoms = int(line.strip().split()[0])
            break
            
    all_atoms = []
    for i in range(len(data)): # Iterating through file to find where atoms start
        line = data[i]
        if &#34;atoms&#34; == line.strip().lower()[:5]:
            for j in range(2, num_atoms+2): # Iterating through atoms section to get all atoms
                line = data[i+j].split(&#39;#&#39;)[0].split()
                line = [float(x) for x in line]
                all_atoms.append(line)
            
            break
    
    all_atoms = np.array(all_atoms)
    return all_atoms

def clean_up(original, new, identifier=&#39;&#39;, storage_path=&#39;&#39;, mode=&#39;delete&#39;):
    &#34;&#34;&#34;Cleans up current directory by moving generated files out into another directory (or deleting them)
    
    This functions takes two lists of filenames, and filenames in `new` that arent in `original` will be removed/copied. Intended to be used by fetching all filenames before and after running some program, alowing generated files to be dealt with.
    
    Parameters:
    ---
    **original: *list* **  
    A list of strings containing a set of filenames to retain
    
    **new: *list* **  
    A list of strings containing a set of filenames. Any filenames not in original will be removed
    
    **identifier: *str, optional* **  
    When moving/copying files, this string is added as a prefix to their filenames
    
    **storage_path: *str, optional* **  
    Where to move/copy the files to
    
    **mode: *str, optional* **  
    Determines which actions the function takes. In &#39;delete&#39; mode the files are deleted, in &#39;copy&#39; or &#39;move&#39; the files are copied or moved to the storage_path directory
    &#34;&#34;&#34;
    for filename in new:
        if filename not in original:
            if mode == &#39;move&#39;:
                shutil.move(f&#34;./{filename}&#34;, f&#34;{storage_path}/{identifier}{filename}&#34;)
            elif mode==&#39;delete&#39;:
                os.remove(f&#34;./{filename}&#34;)
            elif mode==&#39;copy&#39;:
                shutil.copyfile(f&#34;./{filename}&#34;, f&#34;{storage_path}/{identifier}{filename}&#34;)
                
def time_to_steps(time, step_size=2):
    &#34;&#34;&#34;Given some step size, computes how many steps are in the given time
    
    Parameters:
    ---
    **time: *str* **  
    The time in the format &#39;xps&#39; or &#39;xns&#39; where x is some integer
    
    **step_size: *int* **  
    The step size in femtoseconds.
    
    Returns:
    ---
    **steps: *int* **  
    The number of steps in the provided time
    
    Raises:
    ---
    Format Exception
    If the time provided isn&#39;t in picoseconds or nanoseconds
    &#34;&#34;&#34;
    
    time = time.strip()
    if &#39;ps&#39; in time:
        steps = int(time.split(&#39;ps&#39;)[0].split()[0])*1000/step_size
    elif &#39;ns&#39; in time:
        steps = int(time.split(&#39;ns&#39;)[0].split()[0])*1000000/step_size
    elif time == &#39;0&#39;:
        steps = int(time)
    else:
        raise Exception(&#34;Incorrect format, specify an integer immediately followed by either &#39;ps&#39; or &#39;ns&#39;&#34;)
        
    return steps</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="other_helpers.clean_up"><code class="name flex">
<span>def <span class="ident">clean_up</span></span>(<span>original, new, identifier='', storage_path='', mode='delete')</span>
</code></dt>
<dd>
<section class="desc"><p>Cleans up current directory by moving generated files out into another directory (or deleting them)</p>
<p>This functions takes two lists of filenames, and filenames in <code>new</code> that arent in <code>original</code> will be removed/copied. Intended to be used by fetching all filenames before and after running some program, alowing generated files to be dealt with.</p>
<h2 id="parameters">Parameters:</h2>
<p><strong>original: <em>list</em> </strong><br>
A list of strings containing a set of filenames to retain</p>
<p><strong>new: <em>list</em> </strong><br>
A list of strings containing a set of filenames. Any filenames not in original will be removed</p>
<p><strong>identifier: <em>str, optional</em> </strong><br>
When moving/copying files, this string is added as a prefix to their filenames</p>
<p><strong>storage_path: <em>str, optional</em> </strong><br>
Where to move/copy the files to</p>
<p><strong>mode: <em>str, optional</em> </strong><br>
Determines which actions the function takes. In 'delete' mode the files are deleted, in 'copy' or 'move' the files are copied or moved to the storage_path directory</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clean_up(original, new, identifier=&#39;&#39;, storage_path=&#39;&#39;, mode=&#39;delete&#39;):
    &#34;&#34;&#34;Cleans up current directory by moving generated files out into another directory (or deleting them)
    
    This functions takes two lists of filenames, and filenames in `new` that arent in `original` will be removed/copied. Intended to be used by fetching all filenames before and after running some program, alowing generated files to be dealt with.
    
    Parameters:
    ---
    **original: *list* **  
    A list of strings containing a set of filenames to retain
    
    **new: *list* **  
    A list of strings containing a set of filenames. Any filenames not in original will be removed
    
    **identifier: *str, optional* **  
    When moving/copying files, this string is added as a prefix to their filenames
    
    **storage_path: *str, optional* **  
    Where to move/copy the files to
    
    **mode: *str, optional* **  
    Determines which actions the function takes. In &#39;delete&#39; mode the files are deleted, in &#39;copy&#39; or &#39;move&#39; the files are copied or moved to the storage_path directory
    &#34;&#34;&#34;
    for filename in new:
        if filename not in original:
            if mode == &#39;move&#39;:
                shutil.move(f&#34;./{filename}&#34;, f&#34;{storage_path}/{identifier}{filename}&#34;)
            elif mode==&#39;delete&#39;:
                os.remove(f&#34;./{filename}&#34;)
            elif mode==&#39;copy&#39;:
                shutil.copyfile(f&#34;./{filename}&#34;, f&#34;{storage_path}/{identifier}{filename}&#34;)</code></pre>
</details>
</dd>
<dt id="other_helpers.read_atoms"><code class="name flex">
<span>def <span class="ident">read_atoms</span></span>(<span>filename)</span>
</code></dt>
<dd>
<section class="desc"><p>Gets the entire 'Atoms' section from a lammps data file and puts it into a numpy array. </p>
<h2 id="parameters">Parameters:</h2>
<p><strong>filename: <em>str</em> </strong><br>
The name of the lammps data file</p>
<h2 id="returns">Returns:</h2>
<p><strong>all_atoms: <em>str</em> </strong>
A numpy array containing the entire atoms section of the data file</p>
<h2 id="notes">Notes:</h2>
<p>The 'Atoms' section of a lammps data file is formatted as such: [atom_num, molecule-tag, atom-type, q, x, y, z, nx, ny, nz]. nx, ny, nz optional</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def read_atoms(filename):
    &#34;&#34;&#34;Gets the entire &#39;Atoms&#39; section from a lammps data file and puts it into a numpy array. 
    
    Parameters:
    ---
    **filename: *str* **  
    The name of the lammps data file
    
    Returns:
    ---
    **all_atoms: *str* **
    A numpy array containing the entire atoms section of the data file
    
    Notes:
    ---
    The &#39;Atoms&#39; section of a lammps data file is formatted as such: [atom_num, molecule-tag, atom-type, q, x, y, z, nx, ny, nz]. nx, ny, nz optional
    
    &#34;&#34;&#34;
    with open(filename, &#39;r&#39;) as file:
        data = file.readlines()
    
    for i in range(len(data)):
        line = data[i]
        if &#34;atoms&#34; in line:
            num_atoms = int(line.strip().split()[0])
            break
            
    all_atoms = []
    for i in range(len(data)): # Iterating through file to find where atoms start
        line = data[i]
        if &#34;atoms&#34; == line.strip().lower()[:5]:
            for j in range(2, num_atoms+2): # Iterating through atoms section to get all atoms
                line = data[i+j].split(&#39;#&#39;)[0].split()
                line = [float(x) for x in line]
                all_atoms.append(line)
            
            break
    
    all_atoms = np.array(all_atoms)
    return all_atoms</code></pre>
</details>
</dd>
<dt id="other_helpers.run_parallel"><code class="name flex">
<span>def <span class="ident">run_parallel</span></span>(<span>filename, args='', num_cores=1, out=False)</span>
</code></dt>
<dd>
<section class="desc"><p>Simple function to run a python script in serial or parallel and provide it with some parameters</p>
<h2 id="parameters">Parameters:</h2>
<p><strong>filename: <em>str</em> </strong><br>
The name of the python file</p>
<p><strong>args: <em>str</em> </strong><br>
The parameters to pass to the python script, seperated by spaces</p>
<p><strong>num_cores: <em>int</em> </strong><br>
Number of cores/threads to use when running the script. 1 runs the script in parallel</p>
<p><strong>out: <em>bool</em> </strong><br>
If True, prints the output of the script</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run_parallel(filename, args=&#39;&#39;, num_cores=1, out=False):
    &#34;&#34;&#34;Simple function to run a python script in serial or parallel and provide it with some parameters
    
    Parameters:
    ---
    **filename: *str* **  
    The name of the python file
    
    **args: *str* **  
    The parameters to pass to the python script, seperated by spaces
    
    **num_cores: *int* **  
    Number of cores/threads to use when running the script. 1 runs the script in parallel
    
    **out: *bool* **  
    If True, prints the output of the script
    
    &#34;&#34;&#34;
    
    
    if num_cores == 1:
        bashCommand = f&#34;python {filename} {args}&#34;
    else:
        bashCommand = f&#34;mpirun -np {num_cores} python {filename} {args}&#34;
    normal = subprocess.run(bashCommand.split(),
        stdout=subprocess.PIPE, stderr=subprocess.PIPE,
        check=True,
        text=True)

    if out:
        print(normal.stdout)</code></pre>
</details>
</dd>
<dt id="other_helpers.time_to_steps"><code class="name flex">
<span>def <span class="ident">time_to_steps</span></span>(<span>time, step_size=2)</span>
</code></dt>
<dd>
<section class="desc"><p>Given some step size, computes how many steps are in the given time</p>
<h2 id="parameters">Parameters:</h2>
<p><strong>time: <em>str</em> </strong><br>
The time in the format 'xps' or 'xns' where x is some integer</p>
<p><strong>step_size: <em>int</em> </strong><br>
The step size in femtoseconds.</p>
<h2 id="returns">Returns:</h2>
<p><strong>steps: <em>int</em> </strong><br>
The number of steps in the provided time</p>
<h2 id="raises">Raises:</h2>
<p>Format Exception
If the time provided isn't in picoseconds or nanoseconds</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def time_to_steps(time, step_size=2):
    &#34;&#34;&#34;Given some step size, computes how many steps are in the given time
    
    Parameters:
    ---
    **time: *str* **  
    The time in the format &#39;xps&#39; or &#39;xns&#39; where x is some integer
    
    **step_size: *int* **  
    The step size in femtoseconds.
    
    Returns:
    ---
    **steps: *int* **  
    The number of steps in the provided time
    
    Raises:
    ---
    Format Exception
    If the time provided isn&#39;t in picoseconds or nanoseconds
    &#34;&#34;&#34;
    
    time = time.strip()
    if &#39;ps&#39; in time:
        steps = int(time.split(&#39;ps&#39;)[0].split()[0])*1000/step_size
    elif &#39;ns&#39; in time:
        steps = int(time.split(&#39;ns&#39;)[0].split()[0])*1000000/step_size
    elif time == &#39;0&#39;:
        steps = int(time)
    else:
        raise Exception(&#34;Incorrect format, specify an integer immediately followed by either &#39;ps&#39; or &#39;ns&#39;&#34;)
        
    return steps</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="other_helpers.clean_up" href="#other_helpers.clean_up">clean_up</a></code></li>
<li><code><a title="other_helpers.read_atoms" href="#other_helpers.read_atoms">read_atoms</a></code></li>
<li><code><a title="other_helpers.run_parallel" href="#other_helpers.run_parallel">run_parallel</a></code></li>
<li><code><a title="other_helpers.time_to_steps" href="#other_helpers.time_to_steps">time_to_steps</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>